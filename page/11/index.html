<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>hello yongshuai</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="hello yongshuai">
<meta property="og:url" content="http://yoursite.com/page/11/index.html">
<meta property="og:site_name" content="hello yongshuai">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hello yongshuai">
  
    <link rel="alternate" href="/atom.xml" title="hello yongshuai" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">hello yongshuai</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">司永帅个人博客</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-学习日志汇总" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/21/学习日志汇总/" class="article-date">
  <time datetime="2015-08-21T13:42:36.000Z" itemprop="datePublished">2015-08-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/估值/">估值</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/21/学习日志汇总/">凭证学习日志汇总</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="2016-07-14"><a href="#2016-07-14" class="headerlink" title="2016-07-14"></a>2016-07-14</h1><h2 id="解决sqlldr错误"><a href="#解决sqlldr错误" class="headerlink" title="解决sqlldr错误"></a>解决sqlldr错误</h2><p>换了同事的文件助手，经过排查，明确了不是数据库服务器，中间件和估值系统客户端的原因，网上有人说可能是因为Oracle客户端版本跟Oracle数据库版本不匹配。从网上下载了64位的Oracle11g客户端，成功解决了问题。</p>
<h2 id="跑测试案例5月30，31日帐目"><a href="#跑测试案例5月30，31日帐目" class="headerlink" title="跑测试案例5月30，31日帐目"></a>跑测试案例5月30，31日帐目</h2><p>1.新股改革生效日期<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">update</span> txtcs a <span class="keyword">set</span> a.vc_csz=<span class="string">'20160101'</span> <span class="keyword">where</span> a.vc_csdm=<span class="string">'JYQS_XGGGSXRQ'</span>;<span class="keyword">commit</span>;</div></pre></td></tr></table></figure></p>
<p>2.5月30号凭证数量少于应有数量，经检查深交所行情切换日期没有设置。凭证数据中有较大差距，经检查中债估值文件没有读取到，文件的命名规则与系统默认的命名规则不匹配导致无法读取文件。有些凭证上数字小数点只相差了零点几，经检查系统参数中关于位数的设置不正确。<br>3.手工录入5月31号基金业务时发现没有基金业务这个项目，需要后台执行sql将tsys_module表中基金业务模块显示出来。第一次只生成了58个凭证，经检查上海结算明细和深交所发行对应的文件命名规则发生了变化</p>
<h1 id="2016-07-15"><a href="#2016-07-15" class="headerlink" title="2016-07-15"></a>2016-07-15</h1><h2 id="跑测试案例5月31号账目"><a href="#跑测试案例5月31号账目" class="headerlink" title="跑测试案例5月31号账目"></a>跑测试案例5月31号账目</h2><p>5月31号账目多了一个凭证，经过检查发现132002 15天集EB的债券类型应该是可转债。系统的实际类型为公司债，因为债券品种不同，导致一个凭证的分成了两个凭证。在更改了证券的基本信息之后，发现31号的凭证数目还是不对，在保证系统参数以及其他的配置信息都是正确的前提下，吧前天的账目重跑了一下，结果便正确了。这让我意识到了证券信息的底层特性。</p>
<h2 id="跑测试案例6月1号账目"><a href="#跑测试案例6月1号账目" class="headerlink" title="跑测试案例6月1号账目"></a>跑测试案例6月1号账目</h2><p>6月1号因为少读取了TA文件，导致凭证数目不对。配置完接手路径之后，凭证数目是对的。核对了每张凭证的数字之后，发现只有银行存款利息这项数目不正确。经过核对之后发现问题出现在科目上面，因为系统中一些底层科目属性设置的不正确，导致科目之间的结转流程是不一样的，导致银行利息收入不正确。在数量，以及交易数字都能对应的情况下，银行利息不正确是很常见的一个问题。</p>
<h1 id="2016-07-18"><a href="#2016-07-18" class="headerlink" title="2016-07-18"></a>2016-07-18</h1><h2 id="跑测试案例6月2号-6月16号测试案例"><a href="#跑测试案例6月2号-6月16号测试案例" class="headerlink" title="跑测试案例6月2号-6月16号测试案例"></a>跑测试案例6月2号-6月16号测试案例</h2><p>6月2号配股缴款凭证没有生成，系统没有读取文件里的内容，需要手动录入。6月8日回购业务凭证数字中，与正确结果相差1，需要手动更改一下交易所手续费。</p>
<h2 id="熟悉数据表整体结构"><a href="#熟悉数据表整体结构" class="headerlink" title="熟悉数据表整体结构"></a>熟悉数据表整体结构</h2><p>tstoretype表中相当于整个数据库表的目录，不知道某个文件的内容存储到哪里时可以用通过查这张表来查看。</p>
<h1 id="2016-07-19"><a href="#2016-07-19" class="headerlink" title="2016-07-19"></a>2016-07-19</h1><h2 id="计算5月30号股票交易凭证"><a href="#计算5月30号股票交易凭证" class="headerlink" title="计算5月30号股票交易凭证"></a>计算5月30号股票交易凭证</h2><p>完成了上交所市场600050[中国联通]、601988[中国银行]、深交所市场的000001[平安银行]三只股票交易的凭证。</p>
<h2 id="证券知识基础"><a href="#证券知识基础" class="headerlink" title="证券知识基础"></a>证券知识基础</h2><p>交易所清算速度一般为T+1，银行间一般为T+0。全托管和三方托管的区别，券商收取的佣金一般是按合笔计算的，分笔与合笔的计算结果一般有尾差。了解了估值系统在基金公司在不同类型公司的作用.</p>
<h1 id="2016-07-20"><a href="#2016-07-20" class="headerlink" title="2016-07-20"></a>2016-07-20</h1><h2 id="计算债券交易凭证"><a href="#计算债券交易凭证" class="headerlink" title="计算债券交易凭证"></a>计算债券交易凭证</h2><p>交易所债券不收佣金，国债是没有利息税的。债券利息的计算公式为ROUND(ROUND(票面利率/100/计息周期所在年份天数<em>实际天数，8)</em> 债券数量,2)。基本的思想是计算出单价，单价乘以数量，计算单价时保留的位数根据系统参数来设置。一般交易所是保留八位小数，银行间保留12位。利息税是倒减出来的，先计算税后利息，如果是合笔计算的话，每笔成交合同计算的税后利息保留8位或12小数，合笔之后保留两位小数。</p>
<h2 id="Oracle基础"><a href="#Oracle基础" class="headerlink" title="Oracle基础"></a>Oracle基础</h2><p>今天帮几个同事解决了数据库监听的问题,中间件起不来的几个常见原因：listerner.ora<br>经常碰见的一个错误是ora-12514<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">SID_LIST_LISTENER =</div><div class="line">  (SID_LIST =</div><div class="line">   (SID_DESC =</div><div class="line">    (GLOBAL_DBNAME = oracle11g)</div><div class="line">    (ORACLE_HOME = /u01/app/oracle/product/11.2.0)</div><div class="line">    (SID_NAME = oracle11g)</div><div class="line">    )</div><div class="line"> )</div></pre></td></tr></table></figure></p>
<p>ls_fa.xml中配置的是监听服务名，而不是数据库实例名<br>tnsnames.ora配置文件中，监听服务名和数据库实例名的映射关系。</p>
<h1 id="2016-07-21"><a href="#2016-07-21" class="headerlink" title="2016-07-21"></a>2016-07-21</h1><h2 id="计算债券交易凭证-1"><a href="#计算债券交易凭证-1" class="headerlink" title="计算债券交易凭证"></a>计算债券交易凭证</h2><p>计算债券计息凭证中，有的需要合笔计算，有的需要分笔计算，这是由系统参数控制的。系统参数中是根据与债券的类别来决定是分笔计算哈市合笔计算。企业债，可转债，分离债，公司债是按照合笔计算的。借和贷本身不等于增和减，只有与具体的账户相结合后才可以表示增和减。与不同类型的账户相结合，分别表示增加和减少。如对资产类账户来说，借表示增加，贷表示减少；对负债类账户正好相反，贷表示增加，借表示减少。以前一直搞不清损益类科目的借贷方向,如果把损益类科目分成收入</p>
<h2 id="估值系统结构"><a href="#估值系统结构" class="headerlink" title="估值系统结构"></a>估值系统结构</h2><p>转账公式是业务核心，数据库查询转账公式的语句为：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tzdyzzszz t <span class="keyword">where</span> t.l_bh=<span class="number">301</span> <span class="keyword">and</span> t.l_ztbh=<span class="number">9999</span>;</div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tzdyzzszc t <span class="keyword">where</span> t.l_zbbh=<span class="number">301</span> <span class="keyword">and</span> t.l_ztbh=<span class="number">9999</span>;</div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tzdyzzszcykmsx t <span class="keyword">where</span> t.l_zbbh = <span class="number">301</span> <span class="keyword">and</span> t.l_ztbh=<span class="number">9999</span>;<span class="keyword">comment</span> <span class="keyword">on</span> <span class="keyword">table</span> TSTORETYPE <span class="keyword">is</span> <span class="string">'清算接收接口设置'</span>;</div></pre></td></tr></table></figure></p>
<h1 id="2016-07-22"><a href="#2016-07-22" class="headerlink" title="2016-07-22"></a>2016-07-22</h1><h2 id="计算债券交易凭证-2"><a href="#计算债券交易凭证-2" class="headerlink" title="计算债券交易凭证"></a>计算债券交易凭证</h2><p>债券交易中全价和净价的区别：<br>债券交易中的手续费，印花税，证管费中的金额都是要按照全价计算的。<br>计算原始数据中，应该先看交易是净价的还是全价的，如果是净价应该把每笔合同的税前利息计算出来，然后再计算其他依赖金额的费用。<br>全价=净价+税前利息</p>
<h2 id="证券基础知识"><a href="#证券基础知识" class="headerlink" title="证券基础知识"></a>证券基础知识</h2><p>原先没有搞清封闭式基金和开放式基金的区别，从名字上看封闭式基金是对少数机构开放的，是不可交易的，而开放式基金是对所有人开放的，应该是可交易的。事实是相反的，封闭式基金可上市交易，而开放式基金不可上市交易。开放式基金允许投资者在基金成立后进行申购和赎回，这个过程是在场外进行的。开放式基金和封闭式基金的主要区别在于封闭式基金的投资规模是固定的，开放式基金投资规模是非固定的，其基金的规模可以应市场即投资者的购买要求而扩大，也可以应投资者的赎回变现而减少。基金的开放性和封闭性指的是基金的规模，二者的基金的交易场所是不同的，开放式基金的 申购赎回都是在场下进行的，封闭式基金一般在证券交易所上市交易，投资者可以通过二级市场买卖基金单位</p>
<h1 id="2016-07-25"><a href="#2016-07-25" class="headerlink" title="2016-07-25"></a>2016-07-25</h1><h2 id="计算股票交易凭证"><a href="#计算股票交易凭证" class="headerlink" title="计算股票交易凭证"></a>计算股票交易凭证</h2><p>股票买入：<br>有个股本科目计算，股本不包含各种交易费用。买入证券清算款包含成交额+除了佣金以为的其他费用。<br>股票卖出：<br>卖出部分股票估值增值=上一时刻累计估增/上一时刻累计数量<em>T日卖出数量<br>股票差价收入=T日成交额-卖出数量</em>（上一交易日总成本+上一交易日总估值增值)/上一交易日总数量</p>
<h2 id="会计基础知识"><a href="#会计基础知识" class="headerlink" title="会计基础知识"></a>会计基础知识</h2><p>会计恒等式：<br>资产=所有者权益+负债<br>这个公式是静态的，结转之后的，反应的是某个时间点的关系。<br>资产=负债+所有者权益+利润=负债+所有者权益+收入-费用<br>这个公式是动态的关系，是在任意时刻都成立的。收入类和费用类对应系统中六类科目。<br>利润表是会计表中的核心表之一，收入类和费用类是利润表的核心。<br>资产+费用= 负债+所有者权益+收入<br>等号左边：增加记借，减少记贷 （借方科目）<br>等号右边：增加记贷，减少记借 （贷方科目）<br>这个公式是对第二个公式的轻微变换，更加清晰地反应了复式借贷平衡法的精髓。</p>
<h1 id="2016-07-26"><a href="#2016-07-26" class="headerlink" title="2016-07-26"></a>2016-07-26</h1><h2 id="计算股票交易凭证-1"><a href="#计算股票交易凭证-1" class="headerlink" title="计算股票交易凭证"></a>计算股票交易凭证</h2><p>卖出部分深交所股票估值增值=上一时刻累计估增/上一时刻累计数量<em>T日卖出数量<br>股票差价收入=T日成交额-卖出数量</em>（上一交易日总成本+上一交易日总估值增值)/上一交易日总数量<br>股票的估值增值是一个动态的概念，因为每日的收盘价都是不一样的。估值增值=T日收盘价*数量-成本</p>
<h2 id="股票凭证基础知识"><a href="#股票凭证基础知识" class="headerlink" title="股票凭证基础知识"></a>股票凭证基础知识</h2><p>基本认识;凭证记录了金额、金额的方向以及科目之间的结转关系。所以通过追踪业务凭证中的科目，可以理清业务中的具体过程。新股申购的详细过程及凭证如下：<br>申购当日（T）      借：证券清算款<em>新股申购款<br>                                     贷：证券清算款<br>验资日（T+1）     借：证券清算款<br>                                     贷：银行存款或结算备付金<br>中签时（T+2）     借：股票投资</em>新股成本<br>                                     贷：证券清算款<em>新股申购款<br>返款清算（T+2） 借：证券清算款<br>                                      贷：证券清算款</em>新股申购款<br>返款到账（T+3） 借：银行存款或结算备付金<br>                                      贷：证券清算款<br>上市流通（T+N） 借：股票投资<br>                                       贷：股票投资_新股成本</p>
<h1 id="2016-07-27"><a href="#2016-07-27" class="headerlink" title="2016-07-27"></a>2016-07-27</h1><h2 id="计算股票交易凭证-2"><a href="#计算股票交易凭证-2" class="headerlink" title="计算股票交易凭证"></a>计算股票交易凭证</h2><p>收盘价是计算估值增值的依据。上海的行情数据存储在外部文件mktdt文件中，通过<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tstoretype t <span class="keyword">where</span> t.vc_caption <span class="keyword">like</span> <span class="string">'%FAST%'</span></div></pre></td></tr></table></figure></p>
<p>找到上海的行情数据存储在tjk_shqs_mktdt00表中。深圳的行情数据存储在外部文件securities_yyyymmdd.xml文件中，通过<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tstoretype t <span class="keyword">where</span> t.vc_caption <span class="keyword">like</span> <span class="string">'%深交所信息%'</span></div></pre></td></tr></table></figure></p>
<p>找到深圳的第五代接口行情数据存储在TJK_SZQS_V5_SECURITIES表中。经过对比，tstoretypez中的vc_caption字段和客户端日常业务中，公共数据，日中清算时外部文件前显示的提示信息是完全一致的。</p>
<h2 id="股票费用计算"><a href="#股票费用计算" class="headerlink" title="股票费用计算"></a>股票费用计算</h2><p>深圳佣金计算过程要保留的位数问题。深圳佣金计算过程保留的位数由系统参数中费用计算类的一个参数控制。如果选择特定的位数（2,4,8）那么在计算纯佣金过程中，经手费和证管费也保留相应的位数。<br>按成交合同计算佣金时，可以从tcjhb表中读取数据，按委托编号计算佣金时</p>
<h1 id="2016-07-28"><a href="#2016-07-28" class="headerlink" title="2016-07-28"></a>2016-07-28</h1><h2 id="计算债券交易凭证-3"><a href="#计算债券交易凭证-3" class="headerlink" title="计算债券交易凭证"></a>计算债券交易凭证</h2><p>计算债券估值增值时，需要用到市价。了解了市价和收盘价的区别，对交易所而言，对于净价债券来说，估值净价（收盘价）就是市价；对于全价债券来说，估值全价（收盘价）-单位税后利息。对于银行间而言，净价债券:估值净价（收盘价）+单位利息税=市价； 进行债券估值凭证增值计算时，需要查询收盘价。从数据库获取收盘价的sql语句如下：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> t.securityid ,t.closepx <span class="keyword">from</span> tjk_shqs_mktdt00 t <span class="keyword">where</span> t.d_ywrq=<span class="keyword">to_date</span>(<span class="string">'20160531'</span>,<span class="string">'yyyymmdd'</span>) <span class="keyword">and</span> t.securityid <span class="keyword">in</span> (<span class="string">'010107'</span>,<span class="string">'132002'</span>);</div></pre></td></tr></table></figure></p>
<p> 计算债券计息增值时，如果当天增加了持仓，需要把当天买入的持仓部分也进行计息。这是由系统参数–&gt;债券业务–&gt;交易所债券买入是否影响当天计息 决定的。<br>债券的税前利息都是分笔计算的，应收利息是分笔还是合笔，看系统参数中哪些债券品种是合笔的。计算5月30号债券凭证时，国债竟然有0.07的利息。在国债的计算过程中，税前利息是按分笔计算的，税后利息应该按合笔计算。但是合笔计算的结果比分笔的计算结果多了0.07，为了调尾差，将这个尾差作为当日的债券利息。</p>
<h2 id="债券费用计算"><a href="#债券费用计算" class="headerlink" title="债券费用计算"></a>债券费用计算</h2><p>交易所<br>T+0回转交易：截至交易日（含交易日）的利息<br>银行间<br>T+0：截至交割日（交易日）前一自然日的利息<br>T+1：截至交割日（下一交易日）前一自然日的利息<br>兑息<br>交易所： T+0回转交易，交易后即按券过户处理<br>付息日买入-含一天利息<br>付息日前一日买入-全部利息（兑息金额）<br>银行间：交割日过户<br>付息日买入-没有利息</p>
<h1 id="2016-07-29"><a href="#2016-07-29" class="headerlink" title="2016-07-29"></a>2016-07-29</h1><h2 id="计算债券交易凭证-4"><a href="#计算债券交易凭证-4" class="headerlink" title="计算债券交易凭证"></a>计算债券交易凭证</h2><p>债券的利息计算主要分为交易利息和日终利息。这里面有几个容易混淆的问题，交易当天的债券利息是算买方的还是算卖方的？经计算是算卖方的。交易计息的情况是比较简单的，区别点主要是根据所在计息年度是否包含2月29日来确定实际天数，如果不包含，则实际天数=T日-起息日（或者最近）+1，若包含，则实际天数=T日-起息日（或者最近）+1-1。日中计息的情况稍微麻烦一点，基本思路是日中计息=今日累计计息-上一时刻累计计息。如果当天没有交易，公式很简单。如果有交易发生的情况下，需要进行分类计算。例子如下：<br>T日有200手 T+N 日买50手  当日利息：200+50-250<br>           T+N 日卖50手  当日利息：150+50-200<br>           T+N 日买50手卖30手  当日利息：220+30-50-200<br>日终持仓量+当日卖出的-当日买的-上一时刻持仓量</p>
<h2 id="会计基础"><a href="#会计基础" class="headerlink" title="会计基础"></a>会计基础</h2><p>权责发生制<br>凡在当期取得的收入或者应当负担的费用，不论款项是否已经收付，都应当确认为当期的收入或费用；<br>凡是不属于当期的收入或费用，即使款项已经在当期收到或已经当期支付，也不能确认为当期的收入或费用。</p>
<p>收付实现制<br>凡是在当期已经实际收到款项的收入和已经支付款项的费用，都应当确认为当期的收入或费用；<br>凡是不属于当期实际收付款项的收入和费用，就不能确认为当期的收入和费用。<br>财务处理程序：<br>1 设置会计科目与账户<br>2 根据原始凭证填制会计凭证<br>3 登记会计账簿<br>4 编制会计报表<br>公允价值是指在公平交易中，熟悉情况的交易双方自愿进行资产交换或者债务清偿的金额</p>
<h1 id="2016-08-01"><a href="#2016-08-01" class="headerlink" title="2016-08-01"></a>2016-08-01</h1><h2 id="学习TA业务"><a href="#学习TA业务" class="headerlink" title="学习TA业务"></a>学习TA业务</h2><p>TA系统和估值系统的联系。TA系统向估值系统提供TA业务数据，估值系统向TA系统提供基金净值信息。新版系统在打开含数据清算文件模块前，必须打开读数工具，否则系统会直接崩溃。原始的TA文件不具有可读性。从数据库中读取TA交易数据的sql如下：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> TJK_TA_ALLOT t <span class="keyword">where</span> t.d_ywrq=<span class="keyword">to_date</span>(<span class="string">'20160601'</span>,<span class="string">'yyyymmdd'</span>);</div></pre></td></tr></table></figure></p>
<p>读取的记录有许多是无用的。CJFE(成交份额)，JSJE(申购金额），SGZE,JYFY这两个字段的意义还没有搞清。TA业务和基金业务的关系没有搞清，TA有申购、赎回，基金也有申购、赎回，看它们的凭证是不一样的，但是没有理解二者的区别。</p>
<h2 id="债券利息计算练习"><a href="#债券利息计算练习" class="headerlink" title="债券利息计算练习"></a>债券利息计算练习</h2><p>债券计息的一个核心点就是日期。起息日、所在年度计息周期天数（T）、本年度计息周期、本期计息周期。以几个具体的问题来理解一下。2月29号算不算？对于银行间债券是算的，对于交易所，不算。时间点的计算，如果债券2014-05-01 —– 2016-05-01 付息周期为三个月，2015-08-01在哪个付息周期？2015-05-01 —- 2015-07-31？2015-05-01 —- 2015-08-01？2015-08-01 —- 2015-11-31？答案是2015-08-01 —- 2015-11-31。时间点的计算一切以计息日为基础来进行计算，最小区间为一个月，如果付息频率为一年，则按12个月进行增加。一般增加的。</p>
<h2 id="sqlplus历史记录和自动补全"><a href="#sqlplus历史记录和自动补全" class="headerlink" title="sqlplus历史记录和自动补全"></a>sqlplus历史记录和自动补全</h2><p>针对Linux系统而言。安装rlwrap软件包  sqlplus的自动补全是基于字典文件的，在.bashrc 中添加别名：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">alias</span> sp=<span class="string">'rlwrap -if sqlplus.dict -r sqlplus username/passwd@//192.168.56.2:1521/oracle11g'</span></div></pre></td></tr></table></figure></p>
<p>sqplus.dict 文件中的词便是自动补全的库，为了让sqlplus 能自动补全表名需要将当前用户的所有表明添加进去。查找所有属于当前用户的表明，sql语句如下：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> table_name <span class="keyword">from</span> user_tables <span class="keyword">order</span> <span class="keyword">by</span> table_name;</div></pre></td></tr></table></figure></p>
<p>在终端中输入sp 即可，按tab键即可像补全bash命令补全sql命令</p>
<h1 id="2016-08-02"><a href="#2016-08-02" class="headerlink" title="2016-08-02"></a>2016-08-02</h1><h2 id="学习TA业务-1"><a href="#学习TA业务-1" class="headerlink" title="学习TA业务"></a>学习TA业务</h2><p>TA业务和基金业务的区别？TA业务指的是本基金份额的变化。基金业务指的是本基金持有其他基金份额的变化。原来一直没搞清楚TA业务和基金业务的区别，因为不知道基金本身除了可以购买股票债券之外还可以购买别的基金。基金业务的所有数据都在TJK_CH_OPENFUND_INFO表中，从数据库获取基金分红业务数据<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> TJK_CH_OPENFUND_INFO t <span class="keyword">where</span> t.d_ywrq=<span class="keyword">to_date</span>(<span class="string">'20160602'</span>,<span class="string">'yyyymmdd'</span>) <span class="keyword">and</span> t.zqdm <span class="keyword">in</span> (<span class="string">'560001'</span>,<span class="string">'000620'</span>)，</div></pre></td></tr></table></figure></p>
<p>NET_VALUE字段表示基金权益比例。</p>
<h2 id="回购利息计算"><a href="#回购利息计算" class="headerlink" title="回购利息计算"></a>回购利息计算</h2><p>最后一天的利息是倒减出来的。非最后一天利息=round((到期金额-初始金额)/(计息截止日-计息开始日+1),2)<br>最后一天利息=回购期间总利息-之前累计计提的利息=回购期间总利息-round((到期金额-初始金额)/(计息截止日-计息开始日+1),2)* (计息截止日-计息开始日)<br>交易所回购计息方式<br>计尾不计头：从下一自然日开始计息，到期日当天计息。绝大多数情况<br>计头不计尾：从回购交易当天计息，到期日当天不计息</p>
<p>回购交易费用是否进成本(交易所和银行间)<br>1费用进成本<br>        （正回购）借 清算款（or存款）<br>                            贷 回购成本=回购金额-费用<br>        （逆回购）借 回购成本=回购金额+费用<br>                            贷 清算款（or存款）<br>2费用进损益<br>        （正回购）借 清算款（or存款）<br>         贷 回购成本=回购金额<br>         借 交易费用支出<br>        （逆回购）借 回购成本=回购金额<br>         贷 清算款（or存款）<br>                       借 交易费用支出</p>
<h1 id="2016-08-03"><a href="#2016-08-03" class="headerlink" title="2016-08-03"></a>2016-08-03</h1><h2 id="计算回购业务凭证"><a href="#计算回购业务凭证" class="headerlink" title="计算回购业务凭证"></a>计算回购业务凭证</h2><p>回购交易中的核心概念：成交金额，返款金额，区间利息，实际天数，每日计息，最后一天计息，回购成本<br>基本公式：<br>返款金额=回购成本+期间利息<br>上海的成交金额是现成的，无需单独计算。交易流水中有成交价格，成交价格用来计算期间利息。将各项利息数据分笔算出，然后进行相加，即可得到区间利息。上海的融资融券业务没有手续费，因此在这种情况下，成交金额=回购成本。<br>在计算深圳融券业务时，回购成本=面额+利息-手续费，根据成交价格算出来的利息包含手续费，因此利息需要减去手续费。非最后一日回购计息=净利息/实际天数，深圳融券业务利息已经包含了交易费，不知道为啥买入返售金额资产还要再加一次手续费。<br>银行间的融资融券业务根据质押式回购的天数有不同的交易费。银行间的结算费和交易费用按照基础设置中的交易费率设置。回购成本=成交金额-结算费-手续费。银行间融资业务：期间利息=返款金额-回购成本</p>
<h2 id="计算基金业务凭证"><a href="#计算基金业务凭证" class="headerlink" title="计算基金业务凭证"></a>计算基金业务凭证</h2><p>数据的排序是相当重要的，这有利于提高计算的效率。从数据库里面，获取基金除权数据并根据字段的重要性进行多种维度排序，<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> TJK_CH_OPENFUND_INFO t <span class="keyword">where</span>  t.zqdm <span class="keyword">in</span> (<span class="string">'560001'</span>,<span class="string">'000620'</span>) <span class="keyword">order</span> <span class="keyword">by</span> t.zqdm ,t.data_date, t.d_ywrq;</div></pre></td></tr></table></figure></p>
<p>货币基金业务的核心计算就是除权分红的计算。在进行数据计算的时候，发现中间数据有0.01偏差，这一天是节假日。节假日的除权分红是一个关键点，可通过系统参数设置（帐套级）—-&gt;基金业务–&gt;复利节假日收益计算方法（每日单独计算）。节假日部分万分收益率需要除以假期天数。<br>货币基金的权益比是万分之几级别的，这是与其他业务有明显的区别。</p>
<h1 id="2016-08-04"><a href="#2016-08-04" class="headerlink" title="2016-08-04"></a>2016-08-04</h1><h2 id="计算TA业务凭证"><a href="#计算TA业务凭证" class="headerlink" title="计算TA业务凭证"></a>计算TA业务凭证</h2><p>从tstoretype表中查询TA业务对应的借口表，申购，赎回，转入，转出分别对应的数据表为<br>TJK_TA_ALLOT，TJK_TA_REDEEM，TJK_TA_SWITCHIN，TJK_TA_SWITCHOUT。流水数据表中含有大量的冗余数据，因此找到合适的筛选条件是非常必要的，我通过成交份额或成交金额来筛选数据<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> TJK_TA_ALLOT t <span class="keyword">where</span> t.cjfe &gt; <span class="number">0</span>  <span class="keyword">order</span> <span class="keyword">by</span> t.rq ,t.d_ywrq;</div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> TJK_TA_REDEEM t <span class="keyword">where</span> t.shcjje&gt;<span class="number">0</span>;</div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> TJK_TA_SWITCHIN t <span class="keyword">where</span> t.cjje &gt; <span class="number">0</span> ;</div><div class="line"><span class="keyword">select</span> *　<span class="keyword">from</span> TJK_TA_SWITCHOUT a <span class="keyword">where</span> a.cjzhje &gt; <span class="number">0</span>;</div></pre></td></tr></table></figure></p>
<p>损益平准金是TA业务的核心概念，TA业务不影响基金的收益，所以除了应收费用和实收基金外，引入了一个损益平准金的概念。为了公平性，先来的与后来的投资者应当相互不影响。理解损益平准金的核心概念是比例，将新来的申购款或者赎回款按照原先基金的<br> 比例进行划分。这个比例分别是 未实现/基金净值 已实现收益/基金总净值<br>基金净值=1+2+3=4+6(1,2,3,4,6代表六类科目余额）<br>未实现部分包含：<br>公允价值变动损益(6101),未分配收益未实现（41040202），损益平准金未实现（401102），本期收益未实现（410302）<br>已实现收益部分通过基金净值倒减出来。</p>
<h2 id="TA计算公式"><a href="#TA计算公式" class="headerlink" title="TA计算公式"></a>TA计算公式</h2><p>算法1:实收基金=申购数量        当基金没有分红记录时采用算法1<br>算法2:实收基金=实收委托资产比例<em>赎回金额   当基金有分红记录时采用算法2<br>    实收委托资产比例=T-1日实收基金余额/T-1日基金总净值  这里的T-1日指的是上一交易日,T日指本日<br>损益平准金-未实现:=未实现损益平准金比例</em>赎回金额<br>  未实现损益平准金比例=(T-1日损益平准金未实现余额+T-1日公允价值变动损益余额+T-1日本期收益未实现余额+T-1日未分配收益未实现余额)/T-1日基金总净值<br>应付赎回款:=赎回金额<br>应付赎回费:=机构赎回费-已记提成金额-后端申购费<br>其他收入-赎回费收入:=基金赎回费-违约金</p>
<h1 id="2016-08-05"><a href="#2016-08-05" class="headerlink" title="2016-08-05"></a>2016-08-05</h1><h2 id="计算TA业务凭证-1"><a href="#计算TA业务凭证-1" class="headerlink" title="计算TA业务凭证"></a>计算TA业务凭证</h2><p>计算TA凭证时，不管是申购，赎回，转入，转出业务都是一交易日为准的。5月31日进行的申购那么就要按照5月31日的总净值，总的未实现收益来计算损益平准金。先计算未实现损益平准金，已实现损益平准金是倒减出来的。5月31号是月末，公允价值变动损益要结转到本期收益未实现科目。如果同一天既有申购和赎回，那么顺序是非常重要的，因为每笔TA业务都会影响损益平准金，所以必须严格按照实际业务发生的先后顺序来计算。转入和申购以及转出和赎回非常相似，只是科目的名称不一样罢了。计算损益平准金的时候需要多次用到估值表中基金净值数据，但是如果前台不点击生成的话，那么估值表中是没有相应的数据的。估值表数据在ttmp_h_gzb中。</p>
<h2 id="系统核心数据表"><a href="#系统核心数据表" class="headerlink" title="系统核心数据表"></a>系统核心数据表</h2><p>系统读取落地文件到对应的接口表,比如gh，每张接口表对应一个视图,例如v_jyqs_ywlbygh 。视图通过证券代码以及其他交易信息判断业务类别，并给出了处理该业务对应的包。证券内码和转账公式是非常重要的字段，在凭证表tvouchers中，含有这两个字段，通过这两个字段可以追踪一条数据流。<br>v<em>shqs</em>：业务识别视图。一个接口一张视图，查看视图即可了解一个文件中所有处理的业务</p>
<p>tcjhb：需要计算费用的业务进此表</p>
<p>tfymx：费用计算的明细结果</p>
<p>tqsk：交易流水表</p>
<p>tfjygh：权益流水表</p>
<p>tghjy：回购流水表</p>
<p>txg：新股表</p>
<p>taccountzqjc：证券结存表。开发报表首选。</p>
<p>tvouchers：凭证表。开发报表首选。</p>
<p>ttmp_h_gzb：估值表。开发报表次选。</p>
<p>tjjjmrhjsj：每日合计数据。开发报表首先。</p>
<h1 id="2016-08-08"><a href="#2016-08-08" class="headerlink" title="2016-08-08"></a>2016-08-08</h1><h2 id="证券基础概念梳理"><a href="#证券基础概念梳理" class="headerlink" title="证券基础概念梳理"></a>证券基础概念梳理</h2><p>0608卖出国债（010107），0613进行交割，那么卖出的债券计息算到哪一天？0608还是0613？答案是0608交易所一般债券采取的都是T+0回转交易。上海固收平台例外（T+0，T+1）。上海固收平台（固定收益证券综合电子平台）是上海证券交易所设置的、与集中竞价交易系统平行、独立的固定收益市场体系。2013年8月2日（周五）以询价模式买入一只上交所固收平台公司债123005，A、8月2日（周五）B、8月3日（周六）C、8月4日（周日）D、8月5日（周一）<br>交易所的123开头的债券（固收平台公司债和资产支持证券）分为两种模式，询价模式T+1，指定对手方模式T+0交收<br><code>回购期限最短为1天，最长为1年。 </code></p>
<p>债券交易数额最小为债券面额十万元，交易单位为债券面额一万元。</p>
<p>银行间债券交易中“T＋0”指参与者于债券交易成交日进行债券结算和资金清算：</p>
<p>“T＋1”指参与者于债券交易成交日之后的第一个营业日进行债券结算和资金清算。</p>
<p>（银行间）债券交易的债券结算和资金清算必须在同一日进行。</p>
<p>上交所交易规则：<br>A股、债券交易和债券买断式回购交易的申报价格最小变动单位为<code>0.01</code>元人民币，基金、权证交易为0.001元人民币，B股交易为0.001美元，债券质押式回购交易为0.005元。在股票分红业务中，0.01是经常出现的。</p>
<p>中登，中国清算公司，中国证券登记结算有限责任公司指的是同一个对象</p>
<h1 id="2016-08-09"><a href="#2016-08-09" class="headerlink" title="2016-08-09"></a>2016-08-09</h1><h2 id="证券基础概念梳理-1"><a href="#证券基础概念梳理-1" class="headerlink" title="证券基础概念梳理"></a>证券基础概念梳理</h2><p>系统是如何判断流水对应的业务类别的？债券的编码信息包含了证券种类和对应的业务类别。<br>上交所证券编码规则：上交所证券代码采用六位阿拉伯数字编码,取值范围为<br>000000-999999。六位代码的前三位为证券种类标识区,</p>
<p>其中第一位为证券产品标识,第二位至第三位为证券业务标识,六位代码的后三位为顺序编码区。上交所证券代码：001×××国债现货； 201×××国债回购；110×××120×××企业债券；129×××100×××可转换债券；310×××国债期货；500×××550×××基金；600　×××A股；700×××配股；710×××转配股；701×××转配股再配股；711×××转配股再转配股；720×××红利；730×××新股申购；735×××新基金申购；900×××B股；737×××新股配售。</p>
<p>债券代码的意义：<br>以21国债（7）为例，它是2001年记帐式(七期)国债，这里的七期就是说在此之前，2001年里已经发行过6次国债。</p>
<p>一直以来对差价收入的概念都比较模糊,这个科目是把未实现收益转化成了已实现收益。简单理解为：实际价差收入（成交价-成本价）与卖出部分估值增值的比较。</p>
<p>金融市场有许多细分的市场，比如债券市场可分为银行间债券市场和交易所债券市场，以细分市场来学习相对明确一些。一个市场有明确的属性可查找，比如交易主体，托管人，交易场所，交易时间，交易方式，交割方式，交易时间等等。</p>
<h2 id="债券凭证计算"><a href="#债券凭证计算" class="headerlink" title="债券凭证计算"></a>债券凭证计算</h2><p>今天追踪了测试案例中国债交易，遇到一个最普遍的问题是中间过程如何保留位数？卖出部分成本=上一时刻总成本/上一时刻总数量*卖出数量，但是具体到数字时该如何保留位数？<br>这类公式都是先计算单位值再乘以数量，具体到数字计算时，一般都是在计算单位值部分时保留八位，结果保留两位，比如<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ROUND(ROUND((上一时刻总成本/上一时刻总数量),8) * 卖出数量,2)</div></pre></td></tr></table></figure></p>
<p>计算债券利息，估值增值凭证时，最基本的思想是余额法，下一笔交易仅跟着上一笔交易。</p>
<h1 id="2016-08-10"><a href="#2016-08-10" class="headerlink" title="2016-08-10"></a>2016-08-10</h1><h2 id="债券凭证计算-1"><a href="#债券凭证计算-1" class="headerlink" title="债券凭证计算"></a>债券凭证计算</h2><p>价差收入：价差收入的计算比较麻烦，对股票和净价债券来说比较好计算，但是对于全价债券就行不通了。问了前辈才了解到系统的凭证是根据借贷平衡来算的。<br>债券兑息日：债券兑息日转出的利息不包含当天的。6月15号122077（西钢债）生成债券利息转出凭证，6月16号（T+1）生成结转凭证，<br><code>银行存款转出的是税前利息，而不是税后利息。利息税部分国家实际上还没有征收，这部分记到利息收入科目中。</code></p>
<p>计算122077（11西刚债）时，期间有多次买卖，计算交易后的日终计息时，始终按照日终的持仓量来计算。计算卖出估值增值，卖出成本时需要把握的一个原则是：未来的不影响过去的，未来的依据过去的。</p>
<h2 id="债券基础概念梳理"><a href="#债券基础概念梳理" class="headerlink" title="债券基础概念梳理"></a>债券基础概念梳理</h2><p>债券计息是最复杂的，有一些比较容易搞混的概念。对交易所而言，券种一般是T+0回转交易，资金T+1交收。一般是净价交易，全价结算（会影响证券清算款）。<br><code>银行间有T+0 和T+1两种模式，但是银行间的债券和资金是在同一天完成的，这跟交易所有很大区别。</code><br>二者计息方式比较：实际天数计算到券种交割当天，交易所所有的年周期都是365天。计算实际天数时要注意减去2月29号这天。银行间计息到券种交割日的前一自然日，交易所年周期天数按实际来算。上交所固收平台就比较特殊了，有二者结合的特点。计算实际天数时，按照交易所的特点来算，券种和资金的交割方式按照银行间的来。<br>上一时刻，上一自然日，上一交易日，累计至本时刻，这些时间概念在债券计息过程中会多次用到。</p>
<h1 id="2016-08-11"><a href="#2016-08-11" class="headerlink" title="2016-08-11"></a>2016-08-11</h1><h2 id="债券凭证计算-2"><a href="#债券凭证计算-2" class="headerlink" title="债券凭证计算"></a>债券凭证计算</h2><p>银行间债券的市价怎么获取？市价=银行间估值价+累计单位利息税。例如5月31号JF7403（15建材）市价：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ROUND(ROUND(<span class="variable">$R</span><span class="variable">$44</span>/100/<span class="variable">$S</span><span class="variable">$44</span>*(<span class="variable">$T</span><span class="variable">$44</span>+1)*100,12)-ROUND(<span class="variable">$R</span><span class="variable">$44</span>*0.8/100/<span class="variable">$S</span><span class="variable">$44</span>*(<span class="variable">$T</span><span class="variable">$44</span>+1)*100,12)+Q79,2)。</div></pre></td></tr></table></figure></p>
<p>银行间债券交易如果是T+1。银行间债券交易当天买入的债券当天可以卖出，交收模式分为T+0、T+1交割。</p>
<p>T+0模式下走“银行存款”科目，T+1模式下走“证券清算款”科目。</p>
<p>类似的还有网上和往下的区别。网上网下的区别就在于网下是直接从银行存款划款，而网上走得是证券清算款.银行间的交易和结算费用一般都是独立出来，过一段时间进行结转。而交易所一般都是T+1日从银行存款结转到证券清算款。<br>系统参数–&gt;买入债券是否影响当天计息 如果选择影响T日当天有0.07的尾差，如果选择无影响，T日无尾差计息。</p>
<h2 id="债券计息点线重合问题"><a href="#债券计息点线重合问题" class="headerlink" title="债券计息点线重合问题"></a>债券计息点线重合问题</h2><p>自己根据例子总结：假设某交易所债券的起息日是20160725周一，百元年利率是3.65%，面值100，周五买入该债券100张，交收模式T+1DVP交收，也就应该下周一进行券款交收，那么该债券买入的应收利息应该计算到下周一，应收利息可能是按照成交合同分笔计算的这里假设为应收为7.9，本周五如果进行债券的每日计息就是累计到本周五的债券利息-累积到下周一的债券利息=<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">round(round(3.65/100*100/(本周五-本周一+1),8)*100,2)-round(round(3.65/100*100/(下周一 - 本周一+1),8)*100,2)=-3，</div></pre></td></tr></table></figure></p>
<p>结果可知，这样的话就导致该日计息为负值，不合理，那么系统在进行逻辑分析的时候就将本周五的每日计息中的数量减去，将累积到下周一的应收利息也减去，就变成0-0，所以周五就不计息，周六周日一样的道理。这时到了券款对付日周一，选择“影响参数”，那么买入的那一笔数量就要加到每日计息里，该日计息=<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">round(round(3.65/100/365/(下周一 - 本周一+1)*100,8)*100,2)-应收利息=0.1</div></pre></td></tr></table></figure></p>
<p>，也是对应收和累计到今日利息分笔合笔计算尾差的调整。<br>     如果选择系统参数“不影响”，周一前的理解相同，因为不影响，周一计息时就不将买入的那部分数量加进来算累计，今日就不产生计息凭证；到了周二，计算日终计息的时候，每日计息=<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">round(round(3.65/100*100/(下周二 - 本周一+1),8)*100,2)-应收利息=1</div></pre></td></tr></table></figure></p>
<p>，尾差在今日调整。</p>
<h1 id="2016-08-12"><a href="#2016-08-12" class="headerlink" title="2016-08-12"></a>2016-08-12</h1><h2 id="跑v3-2案例"><a href="#跑v3-2案例" class="headerlink" title="跑v3.2案例"></a>跑v3.2案例</h2><p>通过继承原先的3.0账套重跑3.2。提示基金代码CS8888已经被占用，我改成了CS9999，在<br>6月1号时无法生成TA业务凭证。原先以为基金代码是随意设置的，其实不然，通过查找了TA业务的原始数据，发现里面的基金代码字段是确定的CS8888，如果基金代码跟TA数据里面的代码不匹配将无法清算TA业务。总结：基金代码是估值系统和TA系统的接口，TA系统的基金代码不是随意设置的，二者需要保持一致。类似的信息还有席位代码和股东代码。如果不设置席位代码，系统无法读取gh[XWDM].dbf文件[XWDM]表示的是席位代码。如果只设置了席位代码而没有设置股东代码的话，系统除了可以成三提两费的凭证外无法生成任何其他业务凭证。<br>基金基础信息的重要性：<br>估值系统的上游系统是投资系统，TA系统，接收这两个系统的数据就要保证接口的一致性。<br>与投资系统的接口是席位代码，股东代码<br>与TA系统的接口是基金代码<br>基金成立时需要录入实收基金科目的数量，成立的时间点一般都是金额等于份额，但是一旦有投资活动，基本上份额不再可能等于金额，如果在成立是不设置金额的话，基金单位净值信息是不正确的，但是基金的总净值似乎是不受份额影响的。</p>
<h2 id="节假日参数"><a href="#节假日参数" class="headerlink" title="节假日参数"></a>节假日参数</h2><p>测试案例中，0612（周日）凭证不正常，如果按节假日来算的话，系统无法生成回购到期凭证和银行间清算款结转凭证，如果不按节假日来算的话，系统会将13日生成的基金红利凭证在12号生成，这似乎是个无法解决的矛盾点。在百思不得其解之后，将0612按节假日处理，添加两个手工凭证，0612后面的凭证也是正确的。询问同事以后，明白了这个问题的原因所在。基金分红数据信息属于公共账套级，因为是继承原来的账套，所以系统已经读取了6.13号的基金分红数据，如果按照非节假日来处理，自然会将原先13号的数据处理成12号的凭证。解决办法：把6月12号按照非节假日处理，在批量做账的时候把交易数据勾掉，这样便可以不清算交易数据。</p>
<h1 id="2016-08-15"><a href="#2016-08-15" class="headerlink" title="2016-08-15"></a>2016-08-15</h1><h2 id="会计科目梳理"><a href="#会计科目梳理" class="headerlink" title="会计科目梳理"></a>会计科目梳理</h2><p>待摊费用和预提费用的区别<br>待摊费用和预提费用的概念及特点:<br>预提费用：是指企业按规定预先提取但尚未实际支付的各项费用。 就是企业还没支付,但应该要支付的,要记入负债待摊费用是指企业 已经 支出，但应当由本期和以后各期分别负担的、分摊期在1年以内（含1年）的各项费用。股票凭证的做账规则，当天有买有卖，先算买的，后算卖的（规则）。利息进入哪个分录？<br>证券清算款是全价交割的，付给卖方的利息已包含在证券清算款内。</p>
<h2 id="深圳新股业务及网下新股业务整理"><a href="#深圳新股业务及网下新股业务整理" class="headerlink" title="深圳新股业务及网下新股业务整理"></a>深圳新股业务及网下新股业务整理</h2><p>网上<br>申购T日<br>T+1日中签扣款  借：新股清算款<br>    贷：代缴清算款<br>T+2日中签缴款  借：代缴清算款<br>    贷：证券清算款<br>T+3日中签交收  借：新股成本<br>    贷：新股清算款<br>T+N日上市流通  借：流通成本<br>    贷：新股成本<br>2016年后的新股<br> 1.隐藏系统参数“新股发行改革生效日期”需要设置成20160101 （txtcs表）      </p>
<p> 深圳证券代码开头：00,30开头，扣款业务类别A3<br> 中签交收业务类别A5<br>网上网下的区别就在于网下是直接从银行存款划款，而网上走得是证券清算款<br>网下不需要验证资金，不在交易所办理，流水都需要手动录进去<br>    网下新股中签     </p>
<pre><code>11020301600570 股票投资-上交所新股-上交所新股成本-恒生电子  借 550,000.00 10,000
     30030306 证券清算款-场外证券清算款-网下证券清算款_新股_上海  贷 550,000.00 0
     30030306 证券清算款-场外证券清算款-网下证券清算款_新股_上海  借 550,000.00 0
     10020101 银行存款-活期存款-活期存款  贷 550,000.00 0

     上市流通     
     11020101600570 股票投资-上交所A股-上交所A股成本-恒生电子  借 550,000.00 10,000
     11020199600570 股票投资-上交所A股-上交所A股估值增值-恒生电子  借 145,300.00 0
     11020301600570 股票投资-上交所新股-上交所新股成本-恒生电子  贷 550,000.00 10,000
     11020399600570 股票投资-上交所新股-上交所新股估值增值-恒生电子  贷 145,300.00 0

     如果有返款     
     网下新股返款     
     1102  银行存款-活期存款-活期存款 借 1231231322
     3003  证券清算款-场外证券清算款-场外证券清算款_新股申购款 贷 1231231322
</code></pre><h1 id="2016-08-16"><a href="#2016-08-16" class="headerlink" title="2016-08-16"></a>2016-08-16</h1><h2 id="新股业务理解"><a href="#新股业务理解" class="headerlink" title="新股业务理解"></a>新股业务理解</h2><p>为什么申购日不做凭证？为什么中签日才开始做凭证？申购是一种普遍的资格，并没有什么权利的变化，所以不做凭证。中签的话，权利已经发生了变化，需要做凭证。这是会计做账的权责发生制原理。<br>T+1日（申购日为T日）新股扣款：在T+1日待缴而不是代缴，因为实际交易当中，别人不可能代缴。<br>资金不足时，为什么借银行存款？<br>T+3 日，缴款金额不足时，为什么借银行存款？为什么是银行存款而不是证券清算款，为什么方向是借？T+3交收时，实际上是银行存款进行划款的，加入应付为1000，实际只有600，那么银行存款为-1000，当日清算款结转之后，银行存款为-400，因此余额不足时为了保持借贷平衡，需要银行存款记借400。<br>从数据角度看新股业务。<br>深交所 新股中签 数据来源sjsfx  表tjk_jyqs_sjsfx 视图v_jyqs_ywlbysjsfx<br>新股缴款数据是无法从外部读取的<br>中签交收 数据来源  sjsfx 表tjk_jyqs_sjsfx</p>
<p>上市流通 数据来源 前一天sjsjg 表tjk_szqs_v5_sjsjg 视图v_szqs_v5_ywlbysjsjg</p>
<p>上交所 新股中签 数据来源 jsmx 表jsmx 视图v_jyqs_ywlbyjsmx</p>
<p>中签交收 数据来源  jsmx 表jsmx</p>
<p>上市流通 数据来源 前一日zqbd 表zqbd 视图v_jyqs_ywlbyzqbd</p>
<h2 id="债券估值价处理"><a href="#债券估值价处理" class="headerlink" title="债券估值价处理"></a>债券估值价处理</h2><p>债券估值采用净价估值，目前市场上除了上交所、深交所“可转债”为全价交易以外，其他都为净价交易。</p>
<p>注意：</p>
<ol>
<li>全价交易的债券下发的行情为全价行情，净价交易的债券下发行情为净价行情。</li>
<li>债券行情数据3个来源：交易所行情、中债登、中证，通过在“基础设置债券估值方法设置”中设置“行情属主”即可。</li>
</ol>
<h1 id="2016-08-17"><a href="#2016-08-17" class="headerlink" title="2016-08-17"></a>2016-08-17</h1><h2 id="配股业务理解"><a href="#配股业务理解" class="headerlink" title="配股业务理解"></a>配股业务理解</h2><p>配股款支付，上海证券代码开头：700,760,742<br>T+7日为配股确认日  借：配股成本  贷：新股清算款<br>上海配股流程：<br>深圳配股只允许一次申报缴款<br>T日为登记日      </p>
<p>T+1-T+5日为配股缴款日 借：新股清算款  T+1-T+5日中得某一天交，不固定哪一天<br> 贷：证券清算款  缴款后下一天记得清算款结转<br>配股缴款，深圳证券代码开头：08、38<br>配股流通，深圳证券代码开头：00、30<br>T+7日为配股确认日  借：配股成本<br>     贷：新股清算款<br>配股缴款日就包含了配股确认日的数据，会自动生成配股确认<br>上海为什么走非T+1？上海配股允许多次申报缴款<br>深圳为什么走证券清算款？深圳只能一次缴款</p>
<h2 id="回购业务理解"><a href="#回购业务理解" class="headerlink" title="回购业务理解"></a>回购业务理解</h2><p>案例：回购金额1000 费用10元<br>回购业务最主要的两个主要参数:利息是否包含交易费用,费用是否冲减成本<br>不冲减成本：<br>借：证券清算款(3) 1000-10<br>借：交易费用(6)：10<br>贷：卖出回购金融资产(2)　1000</p>
<p>冲减成本：<br>借：证券清算款(3） 1000</p>
<p>贷：卖出回购金融资产(2)　1000</p>
<h1 id="2016-08-18"><a href="#2016-08-18" class="headerlink" title="2016-08-18"></a>2016-08-18</h1><h2 id="TA业务理解"><a href="#TA业务理解" class="headerlink" title="TA业务理解"></a>TA业务理解</h2><p>TA业务以客户为中心的账户体系，并整合交易体系、清算体系、资金体系等，建立以账户体系为中心的数据中心。<br> 资金流转  T日（申购日），T日向直销或代销账户缴纳金额，T+1日资金流向基金公司建立的TA专户账户，T+2日进行资金进入托管账户（10020101）。<br>估值系统在TA业务的作用是算清托管账户和投资系统之间账户的资金。<br>TA结转设置的T+1，T指的是申购日还是申购确认日？申购确认日。</p>
<h2 id="股票业务理解"><a href="#股票业务理解" class="headerlink" title="股票业务理解"></a>股票业务理解</h2><p>除权日：登记日的下一个交易日，除权后，股票价格会下降。<br>到账日：分红的现金到投资者账上的日期。注意：股票除权日和到账日是同一天；<br>系统会在除权日（即到账日）生成一张红利到账凭证。<br>除息：分红<br>除权：送股，转股<br>除权，除息都会导致股价降低<br>除权不改变所有者权益，增加股本规模，一般会导致股价降低。除息改变了所有者权益，股本不变的情况下，股价降低。<br>股价是所有者权益的综合体现。<br>不同产品类型，股票红利金额在计税的问题上是不一样的，有些按照税前金额来算，有些按照税后金额来算（一般来说，个人投资者的账户为税后算的，机构投资者账户为税前的，公募基金按个人投资者处理）。<br> 按照税前还是税后金额来计算，系统可通过账套级的“系统参数→交易清算→股票业务→（股票/基金）红利是否扣税”参数来控制。（扣5%的利息税）。</p>
<h1 id="2016-08-19"><a href="#2016-08-19" class="headerlink" title="2016-08-19"></a>2016-08-19</h1><h2 id="分笔与合笔的理解"><a href="#分笔与合笔的理解" class="headerlink" title="分笔与合笔的理解"></a>分笔与合笔的理解</h2><p>遇到最普遍的一个困惑是分笔与分笔的问题。交易所是撮合交易，最小的成交单位就是成交合同，除了某些费用（比如佣金）特别规定按照证券品种或者特别规定按照合笔计算剩余的都是按照分笔计算。分笔与合笔中最常见的问题是尾差问题，分笔是成交事实，合笔一般是为了现实中交易划账扣款的方便，但是为了方便性不能违反成交事实，因此合笔做账时应该补上尾差。净价和全价与分笔合笔经常挂钩，买入利息的计算有分笔和合笔计算两种方式，一般全价交易债券按分笔计算，净价交易债券按合笔计算，系统通过参数“债券交易”“上海合笔计算买卖利息的债券类别”。手工录入的交易都是合笔的，直接进入tqsk表中。tcjhb里面存储的是分笔流水记录。</p>
<h2 id="发生额与余额"><a href="#发生额与余额" class="headerlink" title="发生额与余额"></a>发生额与余额</h2><p>股票的送股业务生成了一个看似很奇怪的凭证，借贷科目和借贷方向完全一样，金额是一正一负都是0.01。这里面引入了一个发生额的。如果一借一贷就说明有转账发生，事实上没有转账发生这就违反了事实。都是0.01是因为上交所最小的变动单位是0.01,如果是0的话，说明业务没有发生，显然不能为0。送股业务对凭证上的影响是在没有增加股本的情况下，数量发生了变化。余额和发生额是系统计算的两个基本概念，计算科目余额的时候都是先统计借、贷方向上的各自发生额，然后计算出余额。二者在业务上有着不同的解释。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/21/学习日志汇总/" data-id="cj9muktmt007wjclxdx91ygwp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/估值/">估值</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习日志/">学习日志</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/金融/">金融</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-显示oracle对象" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/21/显示oracle对象/" class="article-date">
  <time datetime="2015-08-21T12:00:09.000Z" itemprop="datePublished">2015-08-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/database/">database</a>►<a class="article-category-link" href="/categories/database/oracle/">oracle</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/21/显示oracle对象/">显示oracle对象</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="dba-all-user三种级别"><a href="#dba-all-user三种级别" class="headerlink" title="dba,all,user三种级别"></a>dba,all,user三种级别</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> view_name <span class="keyword">from</span> dba_views</div><div class="line"><span class="comment">--for all accessible views (accessible by logged user)</span></div><div class="line"></div><div class="line"><span class="keyword">select</span> view_name <span class="keyword">from</span> all_views</div><div class="line"></div><div class="line"><span class="comment">--for views owned by logged user</span></div><div class="line"></div><div class="line"><span class="keyword">select</span> view_name <span class="keyword">from</span> user_views</div><div class="line"></div><div class="line"><span class="comment">--for views owned by current logged user</span></div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> view_name, owner</div><div class="line"><span class="keyword">FROM</span> sys.all_views</div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> owner, view_name</div></pre></td></tr></table></figure>
<h1 id="通过OBJECTS查找"><a href="#通过OBJECTS查找" class="headerlink" title="通过OBJECTS查找"></a>通过OBJECTS查找</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">--USER_OBJECTS:</span></div><div class="line"><span class="keyword">SELECT</span> *</div><div class="line">  <span class="keyword">FROM</span> USER_OBJECTS</div><div class="line"> <span class="keyword">WHERE</span> object_type = <span class="string">'PROCEDURE'</span></div><div class="line">   <span class="keyword">AND</span> object_name = <span class="string">'MY_STORED_PROCEDURE'</span></div></pre></td></tr></table></figure>
<h1 id="查找包源码"><a href="#查找包源码" class="headerlink" title="查找包源码"></a>查找包源码</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">--查找包</span></div><div class="line"> <span class="keyword">SELECT</span> *</div><div class="line">    <span class="keyword">FROM</span> all_source</div><div class="line">   <span class="keyword">WHERE</span> <span class="keyword">TYPE</span> = <span class="string">'PACKAGE BODY'</span> <span class="keyword">AND</span> <span class="keyword">name</span> = <span class="string">'&lt;your package name&gt;'</span></div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> line;</div><div class="line"></div><div class="line"><span class="comment">--查找包源码</span></div><div class="line"><span class="keyword">SELECT</span> line, <span class="built_in">text</span></div><div class="line"><span class="keyword">FROM</span> dba_source</div><div class="line"><span class="keyword">WHERE</span> owner = ?</div><div class="line">  <span class="keyword">AND</span> <span class="keyword">name</span> = ?</div><div class="line">  <span class="keyword">AND</span> <span class="keyword">type</span> = <span class="string">'PROCEDURE'</span></div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> line</div></pre></td></tr></table></figure>
<h1 id="查找视图源码"><a href="#查找视图源码" class="headerlink" title="查找视图源码"></a>查找视图源码</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">--查找视图源码</span></div><div class="line"><span class="keyword">SELECT</span> view_name, <span class="built_in">text</span> <span class="keyword">FROM</span> user_views;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/21/显示oracle对象/" data-id="cj9muktm4005rjclx7gwb3sz3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/display/">display</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/oracle/">oracle</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-aria2c用法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/21/aria2c用法/" class="article-date">
  <time datetime="2015-08-21T11:48:09.000Z" itemprop="datePublished">2015-08-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/21/aria2c用法/">aria2c用法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="安装aria2c"><a href="#安装aria2c" class="headerlink" title="安装aria2c"></a>安装aria2c</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install aria2 <span class="comment"># aria2c是aria2里面的一个子程序</span></div></pre></td></tr></table></figure>
<h1 id="aria2c-下载实例"><a href="#aria2c-下载实例" class="headerlink" title="aria2c 下载实例"></a>aria2c 下载实例</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">aria2c http://AAA.BBB.CCC/file.zip   <span class="comment">#普通下载</span></div><div class="line">aria2c -s 8 http://AAA.BBB.CCC/file.zip  <span class="comment">#开8个线程下载</span></div><div class="line">aria2c http://AAA.BBB.CCC/file.zip ftp://DDD.EEE.FFF/GGG/file.zip  <span class="comment">#从不同的地址下载同一文件</span></div><div class="line">aria2c http://AAA.BBB.CCC/file.zip ftp://DDD.EEE.FFF/GGG/file.zip  <span class="comment">#支持不同的协议下载同一文件</span></div><div class="line">aria2c -o test.torrent http://AAA.BBB.CCC/file.torrent  <span class="comment">#下载BT种子</span></div><div class="line">aria2c --max-upload-limit 40K -T file.torrent  <span class="comment">#设定BT最大上传速度</span></div><div class="line">aria2c http://AAA.BBB.CCC/file.metalink   <span class="comment">#从metalink下载文件</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">#注：https下载依赖于安装gnu tls或openssl</span></div><div class="line"><span class="comment">#    bt下载依赖于安装gnu tls+libgcrypt或openssl</span></div><div class="line"><span class="comment">#    metalink下载依赖于安装libxml2</span></div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/21/aria2c用法/" data-id="cj9muktkj000zjclxtpgaci2a" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aria2c/">aria2c</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/多线程下载/">多线程下载</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-linux终端图形化输出git提交历史" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/21/linux终端图形化输出git提交历史/" class="article-date">
  <time datetime="2015-08-21T11:40:55.000Z" itemprop="datePublished">2015-08-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/git/">git</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/21/linux终端图形化输出git提交历史/">linux终端图形化输出git提交历史</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="添加别名到主shell-配置文件"><a href="#添加别名到主shell-配置文件" class="headerlink" title="添加别名到主shell 配置文件"></a>添加别名到主shell 配置文件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">alias</span> git-graph=<span class="string">'git log --graph --full-history --all --color \</span></div><div class="line"><span class="string">        --pretty=format:"%x1b[31m%h%x09%x1b[32m%d%x1b[0m%x20%s"'</span></div><div class="line">        ➜  haha git:(sius) ✗ git-graph</div><div class="line">        * 1b37051        (HEAD -&gt; sius) hehhef</div><div class="line">        * 9c519ea        this is siys branch</div><div class="line">        * 6f4c647        (<span class="built_in">source</span>) <span class="built_in">source</span> branch added</div><div class="line">        * f0628d5        (master) master 分支添加</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/21/linux终端图形化输出git提交历史/" data-id="cj9muktlc0032jclx9t6x2wgj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/终端/">终端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ppt-doc转换成pdf" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/21/ppt-doc转换成pdf/" class="article-date">
  <time datetime="2015-08-21T11:24:17.000Z" itemprop="datePublished">2015-08-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/21/ppt-doc转换成pdf/">ppt,doc转换成pdf</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="批量转换成pdf"><a href="#批量转换成pdf" class="headerlink" title="批量转换成pdf"></a>批量转换成pdf</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">libreoffice --convert-to pdf *.ppt</div><div class="line">libreoffice --convert-to pdf *.doc</div></pre></td></tr></table></figure>
<h1 id="合并pdf"><a href="#合并pdf" class="headerlink" title="合并pdf"></a>合并pdf</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pdfunite Chapter&#123;1..22&#125;.pdf out.pdf</div><div class="line">pdfunite *.pdf out.pdf</div><div class="line">pdfunite <span class="keyword">in</span>-1.pdf <span class="keyword">in</span>-2.pdf out.pdf</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/21/ppt-doc转换成pdf/" data-id="cj9muktlh003mjclxvs8afx79" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/doc/">doc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pdf/">pdf</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ppt/">ppt</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-git无父分支" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/21/git无父分支/" class="article-date">
  <time datetime="2015-08-21T10:16:55.000Z" itemprop="datePublished">2015-08-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/git/">git</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/21/git无父分支/">git无父分支</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="创建无父分支"><a href="#创建无父分支" class="headerlink" title="创建无父分支"></a>创建无父分支</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout --orphan version2 <span class="comment">#创建分支时会继承父分支已经commit过里面的文件</span></div></pre></td></tr></table></figure>
<h1 id="删除继承过来的东西"><a href="#删除继承过来的东西" class="headerlink" title="删除继承过来的东西"></a>删除继承过来的东西</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rm -rf . <span class="comment">#删除继承过来的对象</span></div></pre></td></tr></table></figure>
<h1 id="添加新的对象"><a href="#添加新的对象" class="headerlink" title="添加新的对象"></a>添加新的对象</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git add .</div></pre></td></tr></table></figure>
<h1 id="提交新的对象"><a href="#提交新的对象" class="headerlink" title="提交新的对象"></a>提交新的对象</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git commit -m <span class="string">"version2 commit "</span></div></pre></td></tr></table></figure>
<h1 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h1><h2 id="每个分支管理不同的产品"><a href="#每个分支管理不同的产品" class="headerlink" title="每个分支管理不同的产品"></a>每个分支管理不同的产品</h2><h2 id="一个分支管理博客静态代码，一个分支管理源码"><a href="#一个分支管理博客静态代码，一个分支管理源码" class="headerlink" title="一个分支管理博客静态代码，一个分支管理源码"></a>一个分支管理博客静态代码，一个分支管理源码</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/21/git无父分支/" data-id="cj9muktkx001tjclxem8e9hje" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/无父分支/">无父分支</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ffmpeg录制视频" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/21/ffmpeg录制视频/" class="article-date">
  <time datetime="2015-08-21T09:48:10.000Z" itemprop="datePublished">2015-08-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/21/ffmpeg录制视频/">ffmpeg录制视频</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="hello"><a href="#hello" class="headerlink" title="hello"></a>hello</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/21/ffmpeg录制视频/" data-id="cj9muktkv001njclxlmybc9p1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ffmpeg/">ffmpeg</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/录制视频/">录制视频</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mybatis generator的用法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/21/mybatis generator的用法/" class="article-date">
  <time datetime="2015-08-21T09:36:50.000Z" itemprop="datePublished">2015-08-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/21/mybatis generator的用法/">mybatis generator 的使用和问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="mybatis-generator-自动生成代码"><a href="#mybatis-generator-自动生成代码" class="headerlink" title="mybatis generator 自动生成代码"></a>mybatis generator 自动生成代码</h1><p>需要准备的jar包<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">├── generatorConfig.xml</div><div class="line">├── mybatis-3.2.7.jar</div><div class="line">├── mybatis-generator-core-1.3.2.jar</div><div class="line">├── mysql-connector-java-5.1.30.jar</div><div class="line">└── src</div></pre></td></tr></table></figure></p>
<p>配置文件如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;  </div><div class="line"><span class="meta">&lt;!DOCTYPE generatorConfiguration  </span></div><div class="line"><span class="meta">PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"  </span></div><div class="line"><span class="meta">"http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span>  </div><div class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span>  </div><div class="line"><span class="comment">&lt;!-- 数据库驱动--&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">classPathEntry</span>  <span class="attr">location</span>=<span class="string">"mysql-connector-java-5.1.30.jar"</span>/&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">"DB2Tables"</span>  <span class="attr">targetRuntime</span>=<span class="string">"MyBatis3"</span>&gt;</span>  </div><div class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span>  </div><div class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressDate"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span>  </div><div class="line">            <span class="comment">&lt;!-- 是否去除自动生成的注释 true：是 ： false:否 --&gt;</span>  </div><div class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressAllComments"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span>  </div><div class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span>  </div><div class="line">        <span class="comment">&lt;!--数据库链接URL，用户名、密码 --&gt;</span>  </div><div class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">"com.mysql.jdbc.Driver"</span> <span class="attr">connectionURL</span>=<span class="string">"jdbc:mysql://127.0.0.1/db_icp"</span> <span class="attr">userId</span>=<span class="string">"root"</span> <span class="attr">password</span>=<span class="string">"xxxx"</span>&gt;</span>  </div><div class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span>  </div><div class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span>&gt;</span>  </div><div class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"forceBigDecimals"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span>  </div><div class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span>  </div><div class="line">        <span class="comment">&lt;!-- 生成模型的包名和位置--&gt;</span>  </div><div class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"com.hundsun.acm.model"</span> <span class="attr">targetProject</span>=<span class="string">"src"</span>&gt;</span>  </div><div class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span>  </div><div class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"trimStrings"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span>  </div><div class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span>  </div><div class="line">        <span class="comment">&lt;!-- 生成映射文件的包名和位置--&gt;</span>  </div><div class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"main.resources.mapping"</span> <span class="attr">targetProject</span>=<span class="string">"src"</span>&gt;</span>  </div><div class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span>  </div><div class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span>  </div><div class="line">        <span class="comment">&lt;!-- 生成DAO的包名和位置--&gt;</span>  </div><div class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">"XMLMAPPER"</span> <span class="attr">targetPackage</span>=<span class="string">"com.hundsun.acm.dao"</span> <span class="attr">targetProject</span>=<span class="string">"src"</span>&gt;</span>  </div><div class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span>  </div><div class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span>  </div><div class="line">        <span class="comment">&lt;!-- 要生成的表 tableName是数据库中的表名或视图名 domainObjectName是实体类名--&gt;</span> </div><div class="line">        <span class="comment">&lt;!--想要生成几个表，就写几个table标签--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"zxxxb"</span> <span class="attr">domainObjectName</span>=<span class="string">"Zxxx"</span> <span class="attr">enableCountByExample</span>=<span class="string">"false"</span> <span class="attr">enableUpdateByExample</span>=<span class="string">"false"</span> <span class="attr">enableDeleteByExample</span>=<span class="string">"false"</span> <span class="attr">enableSelectByExample</span>=<span class="string">"false"</span> <span class="attr">selectByExampleQueryId</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">context</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#＃ -overwrite 是覆盖选项，如果第一次生成没必要加</span></div><div class="line"><span class="variable">$java</span> -jar mybatis-generator-core-1.3.2.jar -configfile generatorConfig.xml -overwrite</div></pre></td></tr></table></figure>
<p>生成之后的目录结构<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">├── generatorConfig.xml</div><div class="line">├── mybatis-3.2.7.jar</div><div class="line">├── mybatis-generator-core-1.3.2.jar</div><div class="line">├── mysql-connector-java-5.1.30.jar</div><div class="line">└── src</div><div class="line">    ├── com</div><div class="line">    │   └── hundsun</div><div class="line">    │       └── acm</div><div class="line">    │           ├── dao</div><div class="line">    │           │   └── ZxxxMapper.java</div><div class="line">    │           └── model</div><div class="line">    │               ├── Zxxx.java</div><div class="line">    │               └── ZxxxWithBLOBs.java</div><div class="line">    └── main</div><div class="line">        └── resources</div><div class="line">            └── mapping</div><div class="line">                └── ZxxxMapper.xml</div></pre></td></tr></table></figure></p>
<h1 id="date类型映射错误"><a href="#date类型映射错误" class="headerlink" title="date类型映射错误"></a>date类型映射错误</h1><p>应该映射成　java.sql.Date<br>但是却映射成　java.util.Date</p>
<h1 id="jdbc-type-和-javaType的映射关系"><a href="#jdbc-type-和-javaType的映射关系" class="headerlink" title="jdbc type 和 javaType的映射关系"></a>jdbc type 和 javaType的映射关系</h1><p><a href="https://db.apache.org/ojb/docu/guides/jdbc-types.html" target="_blank" rel="external">apache官方链接</a></p>
<p>JDBC是直接和数据库打交道的，因此类型基本与数据库类型一致</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/21/mybatis generator的用法/" data-id="cj9muktlf003ejclxcz5nvb3i" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSM/">SSM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/generator/">generator</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mybatis/">mybatis</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Mybatis学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/21/Mybatis学习笔记/" class="article-date">
  <time datetime="2015-08-21T09:36:49.000Z" itemprop="datePublished">2015-08-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/21/Mybatis学习笔记/">Mybatis学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="mybatis-的基本组织方式"><a href="#mybatis-的基本组织方式" class="headerlink" title="mybatis 的基本组织方式"></a>mybatis 的基本组织方式</h1><p>核心配置文件<br>sqlxml文件</p>
<h1 id="mybatis新颖的地方"><a href="#mybatis新颖的地方" class="headerlink" title="mybatis新颖的地方"></a>mybatis新颖的地方</h1><ul>
<li>将sql独立成xml文件，将这种方式作为唯一处理sql的方式，将sql作为独立的一部分。</li>
<li>支持接口编程，dao层无需实现（但不许遵循mybatis接口编程的规范）</li>
</ul>
<h1 id="sql语句支持ognl表达式"><a href="#sql语句支持ognl表达式" class="headerlink" title="sql语句支持ognl表达式"></a>sql语句支持ognl表达式</h1><ul>
<li>可直接调用java对象的方法</li>
<li>where set sql … 极大的增加了sql的灵活性和功能性</li>
<li><p>灵活的日志框架</p>
<h1 id="控制台调试Mybatis"><a href="#控制台调试Mybatis" class="headerlink" title="控制台调试Mybatis"></a>控制台调试Mybatis</h1><p><a href="http://www.mybatis.org/mybatis-3/zh/logging.html" target="_blank" rel="external">mybatis中文文档-日志说明</a></p>
</li>
<li><p>独立mybatis的话，核心配置文件，配置日志的接口</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></div><div class="line">    ...</div><div class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"logImpl"</span> <span class="attr">value</span>=<span class="string">"LOG4J"</span>/&gt;</span></div><div class="line">    ...</div><div class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>log4j.properties文件的配置<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">log4j.rootLogger=DEBUG,Console</div><div class="line">log4j.appender.Console=org.apache.log4j.ConsoleAppender</div><div class="line">log4j.appender.Console.layout=org.apache.log4j.PatternLayout</div><div class="line">log4j.appender.Console.layout.ConversionPattern=%d [%t] %-<span class="number">5</span>p [%c] - %m%n</div><div class="line">log4j.logger.org.apache=INFO</div></pre></td></tr></table></figure></p>
<ul>
<li>如果要跟spring结合的话,在web.xml添加log4j的相关参数<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">   &lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line">   <span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></div><div class="line"><span class="tag">       <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span> <span class="attr">xmlns:web</span>=<span class="string">"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span></span></div><div class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span></span></div><div class="line"><span class="tag">       <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"2.5"</span>&gt;</span></div><div class="line">       <span class="comment">&lt;!--log4j参数部分--&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>log4jConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:log4j.properties<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">       <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>log4jExposeWebAppRoot<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">       <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>log4jRefreshInterval<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>10000<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">       <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div><div class="line">       <span class="comment">&lt;!--log4j监听器--&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">listener</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span></div><div class="line">		org.springframework.web.util.Log4jConfigListener</div><div class="line">	<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/21/Mybatis学习笔记/" data-id="cj9muktkd000hjclxqypksa94" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mybatis/">mybatis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习笔记/">学习笔记</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-linux 下wireshark权限问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/21/linux 下wireshark权限问题/" class="article-date">
  <time datetime="2015-08-21T09:36:49.000Z" itemprop="datePublished">2015-08-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/http/">http</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/21/linux 下wireshark权限问题/">linux wireshark 权限问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="背景知识"><a href="#背景知识" class="headerlink" title="背景知识"></a>背景知识</h1><p>最近需要分析一些http 报文里面的一些细节问题，比如post是如何携带数据传递给后台的</p>
<p>需要安装wireshark 来分析报文</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo pacman -S wireshark-gtk</div></pre></td></tr></table></figure>
<h1 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题　"></a>遇到的问题　</h1><h2 id="无法显示网卡列表-usr-bin-dumpcap子进程启动失败"><a href="#无法显示网卡列表-usr-bin-dumpcap子进程启动失败" class="headerlink" title="无法显示网卡列表　/usr/bin/dumpcap子进程启动失败"></a>无法显示网卡列表　/usr/bin/dumpcap子进程启动失败</h2><p>更改当前执行用户的权限即可</p>
<p>可以更改用户的用户组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo usermod -aG wireshark currentUserName</div></pre></td></tr></table></figure>
<p>也可以直接用chmod更改程序的权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo chmod u+x  /usr/bin/dumpcap</div></pre></td></tr></table></figure>
<h2 id="选中相应网卡后提示没有权限"><a href="#选中相应网卡后提示没有权限" class="headerlink" title="选中相应网卡后提示没有权限"></a>选中相应网卡后提示没有权限</h2><p>第一种解决办法<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">setcap</span> <span class="string">'CAP_NET_RAW+eip CAP_NET_ADMIN+eip'</span> /usr/sbin/dumpcap</div></pre></td></tr></table></figure></p>
<h3 id="参数简要解释"><a href="#参数简要解释" class="headerlink" title="参数简要解释"></a>参数简要解释</h3><p>eip是将chown的能力以cap_effective(e),cap_inheritable(i),cap_permitted(p)三种位图的方式授权给相关的程序文件.</p>
<p>CAP_NET_RAW 13 (允许使用原始(raw)套接字)</p>
<p>CAP_NET_ADMIN 12 允许执行网络管理任务：接口、防火墙和路由等.</p>
<p>普通用户不能创建新的网络接口(interface),不能更改ip地址,而CAP_NET_ADMIN可以帮助普通用户完成这项工作</p>
<p>原始套接字编程可以接收到本机网卡上的数据帧或者数据包,对监控网络流量和分析是很有作用的.</p>
<p><a href="https://wiki.wireshark.org/CaptureSetup/CapturePrivileges" target="_blank" rel="external">wireshark 官方wiki 权限问题</a></p>
<p><a href="http://blog.csdn.net/wangpengqi/article/details/9821231" target="_blank" rel="external"> Linux的capability深入分析</a></p>
<p>第二种解决办法<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">chown root /usr/bin/dumpcap</div><div class="line"></div><div class="line">chmod u+s /usr/bin/dumpcap</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/21/linux 下wireshark权限问题/" data-id="cj9muktla002yjclxmfxyfvg8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/archLinux/">archLinux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wireshark/">wireshark</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/权限问题/">权限问题</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/10/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/12/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/11/05/面试准备-flume篇/">面试准备-flume篇</a>
          </li>
        
          <li>
            <a href="/2016/11/03/面试准备-java基础/">面试准备-java基础</a>
          </li>
        
          <li>
            <a href="/2016/11/03/面试准备-java设计模式/">面试准备-java设计模式</a>
          </li>
        
          <li>
            <a href="/2016/11/01/sbt实用操作/">sbt实用操作</a>
          </li>
        
          <li>
            <a href="/2016/11/01/not-use/面试准备-sparkSql/">面试准备-sparkSql</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/bigdata/">bigdata</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/bigdata/hadoop/">hadoop</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/bigdata/hbase/">hbase</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/bigdata/spark/">spark</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/cloud-computing/">cloud-computing</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/cloud-computing/docker/">docker</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/oracle/">oracle</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/redis/">redis</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/dev-tools/">dev tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/centos/">centos</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/shell/">shell</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/vim/">vim</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/估值/">估值</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/语法/">语法</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/ETL/" style="font-size: 10px;">ETL</a> <a href="/tags/ETL篇/" style="font-size: 11.25px;">ETL篇</a> <a href="/tags/FAQ/" style="font-size: 10px;">FAQ</a> <a href="/tags/Hadoop/" style="font-size: 11.25px;">Hadoop</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/SSM/" style="font-size: 11.25px;">SSM</a> <a href="/tags/URL/" style="font-size: 10px;">URL</a> <a href="/tags/object-Object/" style="font-size: 10px;">[object Object]</a> <a href="/tags/archLinux/" style="font-size: 10px;">archLinux</a> <a href="/tags/aria2c/" style="font-size: 10px;">aria2c</a> <a href="/tags/awk/" style="font-size: 10px;">awk</a> <a href="/tags/bigdata/" style="font-size: 20px;">bigdata</a> <a href="/tags/chrome/" style="font-size: 10px;">chrome</a> <a href="/tags/database/" style="font-size: 10px;">database</a> <a href="/tags/datagrid/" style="font-size: 13.75px;">datagrid</a> <a href="/tags/datanode/" style="font-size: 10px;">datanode</a> <a href="/tags/dd/" style="font-size: 10px;">dd</a> <a href="/tags/debian/" style="font-size: 10px;">debian</a> <a href="/tags/dfs/" style="font-size: 10px;">dfs</a> <a href="/tags/display/" style="font-size: 10px;">display</a> <a href="/tags/dmp/" style="font-size: 11.25px;">dmp</a> <a href="/tags/doc/" style="font-size: 10px;">doc</a> <a href="/tags/docker/" style="font-size: 12.5px;">docker</a> <a href="/tags/dokcer/" style="font-size: 10px;">dokcer</a> <a href="/tags/easyui/" style="font-size: 12.5px;">easyui</a> <a href="/tags/eclipse/" style="font-size: 11.25px;">eclipse</a> <a href="/tags/elasticsearch/" style="font-size: 10px;">elasticsearch</a> <a href="/tags/ffmpeg/" style="font-size: 10px;">ffmpeg</a> <a href="/tags/find/" style="font-size: 10px;">find</a> <a href="/tags/flash/" style="font-size: 10px;">flash</a> <a href="/tags/flume/" style="font-size: 11.25px;">flume</a> <a href="/tags/generator/" style="font-size: 10px;">generator</a> <a href="/tags/git/" style="font-size: 11.25px;">git</a> <a href="/tags/hadoop/" style="font-size: 15px;">hadoop</a> <a href="/tags/hbase/" style="font-size: 12.5px;">hbase</a> <a href="/tags/hdfs/" style="font-size: 12.5px;">hdfs</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/hive/" style="font-size: 13.75px;">hive</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/java/" style="font-size: 12.5px;">java</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/kafka/" style="font-size: 12.5px;">kafka</a> <a href="/tags/kfaka/" style="font-size: 10px;">kfaka</a> <a href="/tags/linux/" style="font-size: 18.75px;">linux</a> <a href="/tags/listener/" style="font-size: 10px;">listener</a> <a href="/tags/map-reduce/" style="font-size: 11.25px;">map-reduce</a> <a href="/tags/markdown/" style="font-size: 11.25px;">markdown</a> <a href="/tags/mybatis/" style="font-size: 12.5px;">mybatis</a> <a href="/tags/oracle/" style="font-size: 13.75px;">oracle</a> <a href="/tags/oracle11g/" style="font-size: 10px;">oracle11g</a> <a href="/tags/pdf/" style="font-size: 10px;">pdf</a> <a href="/tags/pl-sql/" style="font-size: 10px;">pl/sql</a> <a href="/tags/ppt/" style="font-size: 10px;">ppt</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/request/" style="font-size: 10px;">request</a> <a href="/tags/response/" style="font-size: 10px;">response</a> <a href="/tags/sbt/" style="font-size: 10px;">sbt</a> <a href="/tags/scala/" style="font-size: 10px;">scala</a> <a href="/tags/sed/" style="font-size: 10px;">sed</a> <a href="/tags/shell/" style="font-size: 11.25px;">shell</a> <a href="/tags/source/" style="font-size: 10px;">source</a> <a href="/tags/spark/" style="font-size: 17.5px;">spark</a> <a href="/tags/sparkSql/" style="font-size: 11.25px;">sparkSql</a> <a href="/tags/sql/" style="font-size: 16.25px;">sql</a> <a href="/tags/sqlplus/" style="font-size: 10px;">sqlplus</a> <a href="/tags/static-ip/" style="font-size: 10px;">static ip</a> <a href="/tags/tomcat/" style="font-size: 10px;">tomcat</a> <a href="/tags/topN/" style="font-size: 10px;">topN</a> <a href="/tags/ubuntu/" style="font-size: 11.25px;">ubuntu</a> <a href="/tags/ubuntu-17-04/" style="font-size: 10px;">ubuntu 17.04</a> <a href="/tags/vim/" style="font-size: 11.25px;">vim</a> <a href="/tags/windows/" style="font-size: 10px;">windows</a> <a href="/tags/wireshark/" style="font-size: 10px;">wireshark</a> <a href="/tags/wordcount/" style="font-size: 10px;">wordcount</a> <a href="/tags/xargs/" style="font-size: 10px;">xargs</a> <a href="/tags/yarn/" style="font-size: 11.25px;">yarn</a> <a href="/tags/zookeeper/" style="font-size: 11.25px;">zookeeper</a> <a href="/tags/乱码/" style="font-size: 10px;">乱码</a> <a href="/tags/代码整合/" style="font-size: 10px;">代码整合</a> <a href="/tags/估值/" style="font-size: 10px;">估值</a> <a href="/tags/关联查询/" style="font-size: 10px;">关联查询</a> <a href="/tags/内嵌json/" style="font-size: 10px;">内嵌json</a> <a href="/tags/分页/" style="font-size: 10px;">分页</a> <a href="/tags/匹配行/" style="font-size: 10px;">匹配行</a> <a href="/tags/启动盘/" style="font-size: 10px;">启动盘</a> <a href="/tags/基础/" style="font-size: 10px;">基础</a> <a href="/tags/增删改查/" style="font-size: 10px;">增删改查</a> <a href="/tags/多线程下载/" style="font-size: 10px;">多线程下载</a> <a href="/tags/大数据/" style="font-size: 11.25px;">大数据</a> <a href="/tags/学习日志/" style="font-size: 10px;">学习日志</a> <a href="/tags/学习笔记/" style="font-size: 10px;">学习笔记</a> <a href="/tags/录制视频/" style="font-size: 10px;">录制视频</a> <a href="/tags/数据共享/" style="font-size: 10px;">数据共享</a> <a href="/tags/数据库/" style="font-size: 10px;">数据库</a> <a href="/tags/数据渲染/" style="font-size: 10px;">数据渲染</a> <a href="/tags/无父分支/" style="font-size: 10px;">无父分支</a> <a href="/tags/权限问题/" style="font-size: 10px;">权限问题</a> <a href="/tags/查询条件下拉/" style="font-size: 10px;">查询条件下拉</a> <a href="/tags/格式化输出/" style="font-size: 10px;">格式化输出</a> <a href="/tags/模块化/" style="font-size: 10px;">模块化</a> <a href="/tags/消息中间件/" style="font-size: 10px;">消息中间件</a> <a href="/tags/理论基础/" style="font-size: 11.25px;">理论基础</a> <a href="/tags/终端/" style="font-size: 10px;">终端</a> <a href="/tags/缓存式编辑/" style="font-size: 10px;">缓存式编辑</a> <a href="/tags/自动输入密码/" style="font-size: 10px;">自动输入密码</a> <a href="/tags/表单下拉/" style="font-size: 10px;">表单下拉</a> <a href="/tags/表格编辑时下拉/" style="font-size: 10px;">表格编辑时下拉</a> <a href="/tags/表结构/" style="font-size: 10px;">表结构</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/语法/" style="font-size: 11.25px;">语法</a> <a href="/tags/重点/" style="font-size: 11.25px;">重点</a> <a href="/tags/金融/" style="font-size: 10px;">金融</a> <a href="/tags/难点/" style="font-size: 11.25px;">难点</a> <a href="/tags/面试/" style="font-size: 15px;">面试</a> <a href="/tags/项目/" style="font-size: 11.25px;">项目</a>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Si Yongshuai<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>